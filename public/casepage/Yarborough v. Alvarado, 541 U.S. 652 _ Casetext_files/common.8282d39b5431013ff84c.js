(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"823F":function(t,n,e){"use strict";e.d(n,"a",function(){return i});var i=function(){}},CTqK:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var i=[".buttons[_ngcontent-%COMP%]{text-align:center}.disabled[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#757575}.material-icons[_ngcontent-%COMP%]{font-size:1.2rem}[_nghost-%COMP%]     .tooltip-inner{font-size:.7rem}"]},DQyP:function(t,n,e){"use strict";e.d(n,"a",function(){return o}),e("nHRs"),e("ps46");var i=Object.assign||function(t){for(var n,e=1,i=arguments.length;e<i;e++)for(var o in n=arguments[e])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t},o=function(){function t(t,n,e,i,o,r,s){this.router=t,this.route=n,this.titleService=e,this.metaService=i,this.api=o,this.alertService=r,this.cdRef=s,this.subscriptionTypes=["trial","contract","vip"],this.plans=[],this.globalError="",this.state="",this.submitClicked=!1,this.subscription={},this.editMode=!1}return t.prototype.ngOnInit=function(){var t=this,n=new Date;this.datePickerMinDate={year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()},this.api.get("/api/subscription/plans",{withCredentials:!0}).toPromise().then(function(n){t.plans=n}).catch(function(n){console.error("Could not load available plans.",n),t.globalError="Could not load available plans"}),this.sid=this.route.snapshot.params.sid,this.sid&&"new"!==this.sid&&(this.editMode=!0,this.api.get("/api/subscription/"+this.sid,{withCredentials:!0}).toPromise().then(function(n){var e;t.loadedSubscription=n,n.expires&&(e=t.convertToDatePicker(n.expires),t.datePickerMinDate=e,t.loadedSubscription.expDate=e),t.subscription=i({expDate:e},n)}).catch(function(n){console.error("Could not load subscription data for "+t.sid+".",n),t.globalError="Could not load subscription data"})),this.setup()},t.prototype.ngAfterViewChecked=function(){this.cdRef.detectChanges()},t.prototype.setup=function(){},t.prototype.onSubmit=function(t){var n=this;if(this.submitClicked=!0,"loading"!==this.state&&t.valid&&this.isModified(t)&&!this.isInactiveSub())if(this.globalError="",this.submitClicked=!1,this.state="loading","stripe"===this.subscription.type)this.state="error",this.globalError="Creation or update of credit card subscriptions is currently not supported!";else{var e=void 0,i=void 0;this.editMode?(i=this.getDataForUpdate(),e=this.api.patch(this.apiSubscriptionRoute+"/"+this.sid,i,{withCredentials:!0}).toPromise()):(i={type:this.subscription.type,plan:this.subscription.plan},this.subscription.expDate&&this.subscription.expDate.year&&(i.expires=this.subscription.expDate),e=this.api.post(this.apiSubscriptionRoute,i,{withCredentials:!0}).toPromise()),e.then(function(){n.state="done",n.alertService.showToast("Subscription successfully "+(n.editMode?"updated!":"created!"),null,{closeable:!0,secondsToAutoClose:2.5}),n.router.navigate(n.redirectRoute)}).catch(function(t){n.state="error",t&&(console.log(t),n.globalError=t.error&&t.error.message||t.message)})}},t.prototype.convertToEndOfDayDate=function(t){return new Date(t.year,t.month-1,t.day,23,59,59)},t.prototype.convertToDatePicker=function(t){var n=new Date(t);return{year:n.getFullYear(),month:n.getMonth()+1,day:n.getDate()}},t.prototype.getDataForUpdate=function(){var t=this,n={};return["plan","type","expDate"].map(function(e){t.subscription[e]!==t.loadedSubscription[e]&&("expDate"===e?n.expires=t.subscription.expDate:n[e]=t.subscription[e])}),n},t.prototype.requiresExpDate=function(){return"vip"!==this.subscription.type},t.prototype.isModified=function(t){return!this.editMode||this.editMode&&t.dirty},t.prototype.getSubscriptionStatusPrompt=function(){return this.subscription.active?this.subscription.active&&(!this.subscription.expires||new Date(this.subscription.expires)>=new Date)?"Active":"Expired":"Inactive"},t.prototype.isInactiveSub=function(){return this.editMode&&(!this.subscription.active||this.subscription.expires&&new Date(this.subscription.expires)<new Date)},t}()},Hv9T:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var i=[".admin-panel[_ngcontent-%COMP%]{position:relative}.admin-panel[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{position:absolute;right:0;top:-3rem}.admin-panel[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.125rem;font-weight:700;margin:0 0 1rem;padding:1rem 0;border-top:1px solid #dee2e6;border-bottom:1px solid #dee2e6}.admin-panel[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;margin:0 0 .5rem;padding:.5rem 0 .25rem;border-bottom:1px solid #dee2e6}.admin-panel[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{font-size:.75rem;color:#757575;font-weight:400}.admin-panel-section[_ngcontent-%COMP%]{display:block;padding-bottom:30px}.admin-panel-create[_ngcontent-%COMP%]{margin-bottom:22.5px}"]},MCV5:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var i=[".input-group-append[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{display:flex;border-top-right-radius:.2rem;border-bottom-right-radius:.2rem}.addons[_ngcontent-%COMP%]   .pmt[_ngcontent-%COMP%], .addons[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{padding-bottom:.5rem}"]},"TAo/":function(t,n,e){"use strict";e.d(n,"a",function(){return i});var i=[".header[_ngcontent-%COMP%]{display:flex;align-items:center;padding-top:2.5rem;padding-bottom:2rem}.header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin:0}@media (max-width:767.98px){.nav-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:inline-block;padding-left:15px}.nav-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:first-child{padding-left:0}}.nav-list[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{display:block;color:#484848;text-align:left;padding-left:0;padding-right:0}@media (min-width:768px){.nav-list[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{border-top:1px solid #dee2e6}.nav-list[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]::before{display:inline-block;content:\"keyboard_arrow_right\";font-family:'Material Icons',monospace;font-size:18px;line-height:1;font-style:normal;vertical-align:text-top;margin-top:2px;float:right}}.nav-list[_ngcontent-%COMP%]   .btn-link.active[_ngcontent-%COMP%], .nav-list[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{color:#005aaa}.nav-list[_ngcontent-%COMP%]   .btn-link.focus[_ngcontent-%COMP%], .nav-list[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:focus, .nav-list[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:hover{text-decoration:none}.nav-list[_ngcontent-%COMP%]   .btn-link.active[_ngcontent-%COMP%]{font-weight:700}.nav-list[_ngcontent-%COMP%]   .btn-link.disabled[_ngcontent-%COMP%], .nav-list[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:disabled{color:#757575}"]},Y9Ih:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var i=[".table[_ngcontent-%COMP%]{font-size:.85rem}.table[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:0 5px;font-size:.85rem}"]},a9nQ:function(t,n,e){"use strict";e.d(n,"a",function(){return o});var i=e("yEwd"),o=(e("nHRs"),e("ps46"),function(){function t(t,n){this.alertService=t,this.api=n}return t.prototype.ngOnInit=function(){this.getSubscriptions()},t.prototype.ngOnDestroy=function(){this.sub&&this.sub.unsubscribe()},t.prototype.getSubscriptions=function(){},t.prototype.getSubscriptionStatusPrompt=function(t,n){return t?t&&(!n||new Date(n)>=new Date)?"Active":"Expired":"Inactive"},t.prototype.getSubscriptionTypePrompt=function(t){return t?i.a[t]:""},t.prototype.isInactiveSub=function(t){return!t.active||t.expires&&new Date(t.expires)<new Date},t.prototype.generateDataForList=function(t){var n=[],e={};return t.forEach(function(t){var n=t.plan?t.plan:"undefined";e.hasOwnProperty(n)||(e[n]=[]),e[n].push(t)}),Object.keys(e).forEach(function(t){var i={},o=0;e[t].forEach(function(t,n){var e=t.type?t.type:"undefined";"trial"===e&&(o+=1),(!i.hasOwnProperty(e)||t.active||!t.expires||!i[e].expires&&new Date(t.expires)>i[e].expires)&&(i[e]=t)}),Object.keys(i).forEach(function(t){i[t].trialCount=o,n.push(i[t])})}),n},t.prototype.showConfirmation=function(t){var n=this;this.alertService.showDialog("Deactivation is irreversible. Are you sure you want to deactivate this subscription?","Warning",[{text:"Yes",onAction:function(){n.deactivate(t)}},{text:"No"}])},t.prototype.deactivate=function(t){var n=this;this.api.delete((this.gid?"/api/group/"+this.gid:this.userOrOrgApiUrl+this.oidOrUserSlug)+"/subscription/"+t.sid,{withCredentials:!0}).toPromise().then(function(){n.alertService.showToast("Subscription successfully deleted!",null,{closeable:!0,secondsToAutoClose:2.5}),n.getSubscriptions()}).catch(function(t){n.alertService.showDialog({message:t.message,title:"Error",internalError:t})})},t}())},yEwd:function(t,n,e){"use strict";var i;e.d(n,"a",function(){return i}),function(t){t.stripe="credit card",t.contract="contract",t.vip="vip",t.trial="trial"}(i||(i={}))}}]);